<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlÄ±ÅŸkanlÄ±k Takip</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons as SVG components
        const Check = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" className={className}>
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Trash2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
        );

        const TrendingUp = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const Award = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className={className}>
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
            </svg>
        );

        function HabitTracker() {
            const [habits, setHabits] = useState([]);
            const [newHabit, setNewHabit] = useState('');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadHabits();
            }, []);

            const loadHabits = () => {
                try {
                    const stored = localStorage.getItem('habits-data');
                    if (stored) {
                        setHabits(JSON.parse(stored));
                    }
                } catch (error) {
                    console.log('Ä°lk kullanÄ±m');
                } finally {
                    setLoading(false);
                }
            };

            const saveHabits = (updatedHabits) => {
                try {
                    localStorage.setItem('habits-data', JSON.stringify(updatedHabits));
                } catch (error) {
                    console.error('Kaydetme hatasÄ±:', error);
                }
            };

            const addHabit = () => {
                if (newHabit.trim()) {
                    const habit = {
                        id: Date.now(),
                        name: newHabit,
                        completions: []
                    };
                    const updated = [...habits, habit];
                    setHabits(updated);
                    saveHabits(updated);
                    setNewHabit('');
                }
            };

            const toggleCompletion = (habitId) => {
                const today = new Date().toDateString();
                const updated = habits.map(habit => {
                    if (habit.id === habitId) {
                        const isCompleted = habit.completions.includes(today);
                        return {
                            ...habit,
                            completions: isCompleted
                                ? habit.completions.filter(d => d !== today)
                                : [...habit.completions, today]
                        };
                    }
                    return habit;
                });
                setHabits(updated);
                saveHabits(updated);
            };

            const deleteHabit = (habitId) => {
                const updated = habits.filter(h => h.id !== habitId);
                setHabits(updated);
                saveHabits(updated);
            };

            const getStreak = (completions) => {
                if (completions.length === 0) return 0;
                
                const dates = completions
                    .map(d => new Date(d))
                    .sort((a, b) => b - a);
                
                let streak = 0;
                let currentDate = new Date();
                currentDate.setHours(0, 0, 0, 0);
                
                for (let date of dates) {
                    date.setHours(0, 0, 0, 0);
                    const diffDays = Math.floor((currentDate - date) / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === streak) {
                        streak++;
                    } else {
                        break;
                    }
                }
                
                return streak;
            };

            const isCompletedToday = (completions) => {
                const today = new Date().toDateString();
                return completions.includes(today);
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                        <div className="text-white text-xl font-semibold">YÃ¼kleniyor...</div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 pb-20">
                    <div className="bg-white/10 backdrop-blur-lg border-b border-white/20 sticky top-0 z-10">
                        <div className="max-w-md mx-auto px-4 py-4">
                            <div className="flex items-center gap-3 mb-1">
                                <div className="w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg">
                                    <TrendingUp size={24} className="text-purple-600" />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold text-white">AlÄ±ÅŸkanlÄ±klarÄ±m</h1>
                                    <p className="text-xs text-white/80">Her gÃ¼n biraz daha iyi</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-md mx-auto px-4 py-4">
                        <div className="bg-white rounded-2xl shadow-2xl p-4 mb-4">
                            <div className="flex gap-2">
                                <input
                                    type="text"
                                    value={newHabit}
                                    onChange={(e) => setNewHabit(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && addHabit()}
                                    placeholder="Yeni alÄ±ÅŸkanlÄ±k..."
                                    className="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none text-sm"
                                />
                                <button
                                    onClick={addHabit}
                                    className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-5 py-3 rounded-xl hover:shadow-lg transition flex items-center gap-2 font-semibold"
                                >
                                    <Plus size={20} />
                                </button>
                            </div>
                        </div>

                        {habits.length > 0 && (
                            <div className="bg-gradient-to-r from-amber-400 to-orange-500 rounded-2xl shadow-2xl p-4 mb-4">
                                <div className="flex items-center gap-2 mb-3">
                                    <Award size={20} className="text-white" />
                                    <h3 className="text-white font-bold">BugÃ¼nkÃ¼ Ä°lerleme</h3>
                                </div>
                                <div className="grid grid-cols-2 gap-3">
                                    <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                                        <div className="text-3xl font-bold text-white">
                                            {habits.filter(h => isCompletedToday(h.completions)).length}
                                        </div>
                                        <div className="text-xs text-white/90 font-medium">Tamamlanan</div>
                                    </div>
                                    <div className="bg-white/20 backdrop-blur-sm rounded-xl p-3">
                                        <div className="text-3xl font-bold text-white">
                                            {Math.max(0, ...habits.map(h => getStreak(h.completions)))}
                                        </div>
                                        <div className="text-xs text-white/90 font-medium">En Uzun Seri</div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {habits.length === 0 ? (
                            <div className="bg-white rounded-2xl shadow-2xl p-8 text-center">
                                <div className="text-7xl mb-3">ðŸŽ¯</div>
                                <p className="text-gray-600 text-sm">
                                    Ä°lk alÄ±ÅŸkanlÄ±ÄŸÄ±nÄ± ekleyerek baÅŸla!
                                </p>
                            </div>
                        ) : (
                            <div className="space-y-3">
                                {habits.map(habit => {
                                    const completed = isCompletedToday(habit.completions);
                                    const streak = getStreak(habit.completions);
                                    
                                    return (
                                        <div
                                            key={habit.id}
                                            className="bg-white rounded-2xl shadow-lg overflow-hidden"
                                        >
                                            <div className="p-4">
                                                <div className="flex items-start gap-3">
                                                    <button
                                                        onClick={() => toggleCompletion(habit.id)}
                                                        className={`w-14 h-14 rounded-2xl border-3 flex items-center justify-center transition-all flex-shrink-0 ${
                                                            completed
                                                                ? 'bg-gradient-to-br from-green-400 to-emerald-500 border-green-500 shadow-lg scale-105'
                                                                : 'border-gray-300 hover:border-purple-500 hover:scale-105'
                                                        }`}
                                                    >
                                                        {completed && <Check size={28} className="text-white" />}
                                                    </button>
                                                    
                                                    <div className="flex-1 min-w-0">
                                                        <h3 className={`text-base font-bold mb-1 ${
                                                            completed ? 'text-gray-400 line-through' : 'text-gray-800'
                                                        }`}>
                                                            {habit.name}
                                                        </h3>
                                                        <div className="flex flex-wrap gap-2 text-xs">
                                                            <span className="bg-orange-100 text-orange-700 px-2 py-1 rounded-lg font-semibold flex items-center gap-1">
                                                                ðŸ”¥ {streak} gÃ¼n
                                                            </span>
                                                            <span className="bg-purple-100 text-purple-700 px-2 py-1 rounded-lg font-semibold">
                                                                âœ“ {habit.completions.length}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    
                                                    <button
                                                        onClick={() => deleteHabit(habit.id)}
                                                        className="text-red-400 hover:text-red-600 p-2 hover:bg-red-50 rounded-xl transition flex-shrink-0"
                                                    >
                                                        <Trash2 size={18} />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HabitTracker />, document.getElementById('root'));
    </script>
</body>
</html>
